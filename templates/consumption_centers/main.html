{% extends "base.html" %}
{% block titulo %}Reportes{% endblock %}
{% block externalcss %}
    <link rel="stylesheet" href="/static/css/consumption_centers/main.css" type="text/css" />

    <link rel="stylesheet" href="/static/js/external/fancybox/jquery.fancybox.css" type="text/css" />
{% endblock %}
{% block externaljs %}
    <script type="text/javascript" src="/static/js/external/fancybox/jquery.fancybox.js"></script>
    <script type="text/javascript" src="/static/js/external/jsapi.js"></script>
    <script type="text/javascript">
        google.load('visualization', '1', {packages: ['corechart']});
    </script>
    <script type="text/javascript">
        function drawVisualization() {
            // Create and populate the data table.
            var data = google.visualization.arrayToDataTable([
                ['Día', 'KwH-h', 'KwH-h', 'KwH-h', 'KwH-h', 'KwH-h', 'KwH-h', 'KwH-h', 'KwH-h', 'KwH-h', 'KwH-h', 'KwH-h', 'KwH-h','KwH-h', 'KwH-h', 'KwH-h', 'KwH-h', 'KwH-h', 'KwH-h','KwH-h', 'KwH-h', 'KwH-h', 'KwH-h', 'KwH-h', 'KwH-h'],
                {% for day, hour_values in week_report_cumulative %}
                    {% if forloop.first %}
                        ['{{ day }}'
                    {% else %}
                        , ['{{ day }}'
                    {% endif %}

                    {% for value in hour_values %}
                        , {{ value }}
                    {% endfor %}
                    ]
                {% endfor %}
            ]);

            // Create and draw the visualization.
            new google.visualization.ColumnChart(document.getElementById('visualization')).
                    draw(data,
                    {title:"",
                        width:960, height:400,
                        hAxis: {title: "Día de la semana"},
                        legend: {position: 'none'},
                        colors: ['#9ebfc6']
                    }
            );
        }
    </script>
{% endblock %}
{% block document_ready %}
    drawVisualization();
    //custom select for sidebar
    $("#empresa").click(function(){
    $("#company_list").slideToggle();
    });

    $("#company_list li").click(function(){
    var texto=$(this).text().replace(/^\s*|\s*$/g,'');
    var texto1 = texto.substring(0,17) + "...";
    $("#empresa").text(texto1);
    $("#company_list").slideUp();

    $.ajax({
    url: "/reportes/set_default_building/" + $(this).attr("rel"),
    type: "GET",
    dataType: 'json',
    async: 'true',
    success: function(datos){
    document.location.reload(true);

    }
    });
    });
{% endblock %}
{% block contenido %}
<div id="bread_crumbs">
    <ul>
        <li><a href="/main/">Inicio</a></li>
        <li><a href="/main/">Reportes</a></li>
    </ul>

</div>
<div id="contenido_interno">
    <h2 id="titulo_reporte">{{ empresa.building_name }} -
        <span>
            {% if consumer_unit.part_of_building %}
                {{ consumer_unit.part_of_building.part_of_building_name }}
            {% else %}
                {{ consumer_unit.electric_device_type.electric_device_type_name }}
            {% endif %}
        </span>
    </h2><a class="various" data-fancybox-type="iframe"  href="/reportes/set_consumer_unit/">Cambiar</a>

    <div class="divider" id="divider_top">&nbsp;</div>

    <h2>
        Reporte de la semana en curso KW/h hora
    </h2>
    <div id="visualization">

    </div>
    <h2 class="g12">Totales Acumulados</h2>
    <table class="g12">
        <thead>
        <tr>
            <th width="14.28%">Lunes</th>
            <th width="14.28%">Martes</th>
            <th width="14.28%">Mi&eacute;rcoles</th>
            <th width="14.28%">Jueves</th>
            <th width="14.28%">Viernes</th>
            <th width="14.28%">S&aacute;bado</th>
            <th width="14.28%">Domingo</th>
        </tr>
        </thead>
        <tbody>
            <tr>
                <td>42 KwH Hora</td>
                <td>23 KwH Hora</td>
                <td>35 KwH Hora</td>
                <td>26 KwH Hora</td>
                <td>33 KwH Hora</td>
                <td>55 KwH Hora</td>
                <td>36 KwH Hora</td>
            </tr>
        </tbody>
    </table>

</div>
{% endblock %}